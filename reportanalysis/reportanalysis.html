<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analysis Data</title>
    <style>
        /* Reset some default styles for better consistency */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* Basic styles for the body */
        body {
            font-family: Arial, sans-serif;
            background-color: #0B1437;
            padding: 20px;
        }

        /* Header styles */
        h1 {
            font-size: 24px;
            margin-bottom: 20px;
            color: #ccc;
        }

        /* Tabs styles */
        .tabs {
            display: flex;
            margin-bottom: 20px;
        }

        .tab {
            cursor: pointer;
            padding: 10px 20px;
            border-radius: 5px 5px 0 0;
            color: #ccc;
        }

        .tab.active {
            border-bottom: 4px solid #007BFF;
            color: #ccc;
        }

        /* Tab content styles */
        .tab-content {
            display: none;
            border-radius: 0 0 5px 5px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        /* Form element styles */
        label {
            font-weight: bold;
        }

        select,
        input[type="date"],
        input[type="checkbox"],
        input[type="text"] {
            padding: 10px;
            margin-bottom: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            margin-left: 10px;
            margin-right: 10px;
        }

        /* Button styles */
        button {
            background-color: #007BFF;
            color: #fff;
            border: none;
            padding: 10px 20px;
            margin-right: 10px;
            border-radius: 5px;
            cursor: pointer;
            margin-left: 10px;
        }

        /* Card styles */
        .card {
            margin-top: 20px;
            color: #fff;
            margin-top: 20px;
            padding: 20px;
            border-radius: 5px;
            background-color: #001f4f;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        /* Set a specific width and height for the chart container */
        .chart-container {
            width: 100%;
            max-width: 800px;
            height: auto;
        }

        /* Positioning for the cards */
        .card-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
        }

        .card-container .card {
            flex-basis: calc(50% - 10px);
        }

        /* Responsive design */
        @media (max-width: 768px) {
            .tabs {
                flex-direction: column;
            }
            .tab {
                width: 100%;
            }
            .tab-content {
                border-radius: 5px;
            }
        }
    </style>
</head>
<body>
    <h1>Analytic Data</h1>

    <!-- Top Navigation Tabs -->
    <div class="tabs">
        <div class="tab active" id="comparisonTab">Comparison Analysis</div>
        <div class="tab" id="comprehensiveTab">Comprehensive Analysis</div>
    </div>

    <!-- Tab 1: Comparison Analysis -->
    <div class="tab-content active" id="comparisonContent">
        <div class="card">
            <label for="meterIds">Energy Meter ID :</label>
            <input type="text" id="meterIds" placeholder="Enter Energy Meter ID">
            <label for="startDate">Start Date:</label>
            <input type="date" id="startDate">
            <label for="endDate">End Date:</label>
            <input type="date" id="endDate">
            <label for="groupBy">Group Data By:</label>
            <input type="checkbox" id="hour" checked>
            <label for="hour">Hour</label>
            <input type="checkbox" id="day">
            <label for="day">Day</label>
            <input type="checkbox" id="month">
            <label for="month">Month</label>
            <input type="checkbox" id="year">
            <label for="year">Year</label>
            <button id="viewData">View Data</button>
            <button id="exportPdf">Export to PDF</button>
            <button id="exportCsv">Export to CSV</button>
            <div class="chart-container">
                <canvas id="lineGraph"></canvas>
            </div>
        </div>
    </div>

    <!-- Tab 2: Comprehensive Analysis -->
    <div class="tab-content" id="comprehensiveContent">
        <div class="card">
            <label for="comprehensiveMeterIds">Energy Meter :</label>
            <input type="text" id="comprehensiveMeterIds" placeholder="Enter Energy Meter ID">
            <label for="comprehensiveDate">Time Period :</label>
            <input type="date" id="comprehensiveDate">
            <button id="comprehensiveViewData">View Data</button>
        </div>

        <!-- Card Container for Comprehensive Analysis Cards -->
        <div class="card-container">
            <!-- Box 1: Overall Consumption -->
            <div class="card">
                <h3>Overall Consumption</h3>
                <div class="chart-container">
                    <canvas id="overallConsumptionChart"></canvas>
                </div>
            </div>

            <!-- Box 2: Daily Consumption -->
            <div class="card">
                <h3>Daily Consumption</h3>
                <div class="chart-container">
                    <canvas id="dailyConsumptionChart"></canvas>
                </div>
            </div>

            <!-- Box 3: Weekdays and Weekend Comparison -->
            <div class="card">
                <h3>Weekdays and Weekend Comparison</h3>
                <div class="chart-container">
                    <canvas id="weekdaysPieChart"></canvas>
                    <canvas id="weekendPieChart"></canvas>
                </div>
                <div class="chart-container">
                    <canvas id="monthComparisonBarChart"></canvas>
                </div>
            </div>

            <!-- Box 4: Active Power History -->
            <div class="card">
                <h3>Active Power History</h3>
                <div class="chart-container">
                    <canvas id="activePowerHistoryChart"></canvas>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.0/chart.min.js"></script>
    <script>


// Get all tab elements
const tabs = document.querySelectorAll('.tab');
const contents = document.querySelectorAll('.tab-content');

tabs.forEach((tab, index) => {
    tab.addEventListener('click', () => {
        // Remove active class from all tabs and contents
        tabs.forEach(innerTab => innerTab.classList.remove('active'));
        contents.forEach(content => content.classList.remove('active'));

        // Add active class to clicked tab and its content
        tab.classList.add('active');
        contents[index].classList.add('active');
    });
});

// Make sure Comparison Analysis tab is active on page load
window.addEventListener('load', () => {
    tabs[0].click();  // Simulates a click on the first tab
});

// Function to handle tab switching
const comparisonTab = document.getElementById('comparisonTab');
const comprehensiveTab = document.getElementById('comprehensiveTab');
const comparisonContent = document.getElementById('comparisonContent');
const comprehensiveContent = document.getElementById('comprehensiveContent');

comparisonTab.addEventListener('click', () => {
    comparisonTab.classList.add('active');
    comprehensiveTab.classList.remove('active');
    comparisonContent.style.display = 'block';
    comprehensiveContent.style.display = 'none';
});

comprehensiveTab.addEventListener('click', () => {
    comprehensiveTab.classList.add('active');
    comparisonTab.classList.remove('active');
    comprehensiveContent.style.display = 'block';
    comparisonContent.style.display = 'none';
});

// Function to handle the "View Data" button click for Comparison Analysis
document.getElementById('viewData').addEventListener('click', () => {
    // Replace the following call with your data retrieval logic for Comparison Analysis
    const comparisonChartData = fetchDataForComparisonAnalysis();

    // Update the line graph with the retrieved data
    updateLineGraph(comparisonChartData);
});

// Function to handle the "View Data" button click for Comparison Analysis
document.getElementById('viewData').addEventListener('click', () => {
    // Get the entered Energy Meter IDs and split them by comma
    const meterIdsInput = document.getElementById('meterIds').value;
    const meterIds = meterIdsInput.split(',').map(id => id.trim());

    // Replace the following call with your data retrieval logic for Comparison Analysis
    const comparisonChartData = fetchDataForComparisonAnalysis(meterIds);

    // Update the line graph with the retrieved data
    updateLineGraph(comparisonChartData);
});

// Function to handle the "View Data" button click for Comprehensive Analysis
document.getElementById('comprehensiveViewData').addEventListener('click', () => {
    // Get the entered Energy Meter IDs for Comprehensive Analysis and split them by comma
    const comprehensiveMeterIdsInput = document.getElementById('comprehensiveMeterIds').value;
    const comprehensiveMeterIds = comprehensiveMeterIdsInput.split(',').map(id => id.trim());

    // Replace the following call with your data retrieval logic for Comprehensive Analysis
    const comprehensiveChartData = fetchDataForComprehensiveAnalysis(comprehensiveMeterIds);

    // Update the charts in the Comprehensive Analysis section with the retrieved data
    updateOverallConsumptionChart(comprehensiveChartData.overallConsumptionData);
    updateDailyConsumptionBarChart(comprehensiveChartData.dailyConsumptionBarData);
    updateWeekdaysPieChart(comprehensiveChartData.weekdaysPieData);
    updateWeekendPieChart(comprehensiveChartData.weekendPieData);
    updateMonthComparisonBarChart(comprehensiveChartData.monthComparisonData);
    updateActivePowerHistoryChart(comprehensiveChartData.activePowerHistoryData);
});


// Functions to update charts for Comparison Analysis
function updateLineGraph(data) {
    const ctx = document.getElementById('lineGraph').getContext('2d');
    const chart = new Chart(ctx, {
        type: 'line',
        data: data,
        options: {
            responsive: true,
            maintainAspectRatio: false,
        }
    });
}

// Functions to update charts for Comprehensive Analysis (similar to previous response)

function fetchDataForComparisonAnalysis() {
    // Implement code to retrieve data for Comparison Analysis
    return {
        labels: ['Label 1', 'Label 2', 'Label 3'], // Replace with actual labels
        datasets: [{
            label: 'Data Series 1',
            data: [10, 20, 30], // Replace with actual data
            borderColor: 'blue',
            fill: false,
        }]
    };
}

function fetchDataForComprehensiveAnalysis() {
    // Implement code to retrieve data for Comprehensive Analysis
    // Example structure for the returned data
    return {
        overallConsumptionData: {
            labels: ['January', 'February', 'March',],
            datasets: [{
                label: 'Overall Consumption (kWh)',
                data: [1000, 1500, 1200],
                backgroundColor: ['red', 'green', 'blue'],
            }]
        },
        dailyConsumptionBarData: {
            labels: ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'],
            datasets: [{
                label: 'Consumption (kWh)',
                data: [
                    [10, 20, 15, 80], // Monday
                    [15, 25, 20, 35], // Tuesday
                    [12, 22, 18, 28], // Wednesday
                    [11, 21, 17, 31], // Thursday
                    [13, 23, 19, 33], // Friday
                    [14, 24, 16, 29], // Saturday
                    [9, 19, 14, 27],  // Sunday
                ],
                backgroundColor: ['red', 'green', 'blue', 'orange'],
            }]
        },
        weekdaysPieData: {
            labels: ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday'],
            datasets: [{
                data: [20, 25, 22, 18, 24],
                backgroundColor: ['red', 'green', 'blue', 'orange', 'purple'],
            }]
        },
        weekendPieData: {
            labels: ['Weekdays', 'Weekend'],
            datasets: [{
                data: [112, 30], // Sample data, replace with actual values
                backgroundColor: ['blue', 'orange'],
            }]
        },
        monthComparisonData: {
            labels: ['January', 'February', 'March'],
            datasets: [{
                label: 'Overall Consumption (kWh)',
                data: [1000, 1500, 1200],
                backgroundColor: ['red', 'green', 'blue'],
            }]
        },
        activePowerHistoryData: {
            labels: ['Label 1', 'Label 2', 'Label 3'], // Replace with actual labels
            datasets: [{
                label: 'Active Power',
                data: [10, 20, 30], // Replace with actual data
                borderColor: 'blue',
                fill: false,
            }]
        }
    };
}

// Chart update functions (similar to previous responses)

function updateOverallConsumptionChart(data) {
    const ctx = document.getElementById('overallConsumptionChart').getContext('2d');
    const chart = new Chart(ctx, {
        type: 'bar',
        data: data,
        options: {
            responsive: true,
            maintainAspectRatio: false,
            aspectRatio: 2,
        }
    });
}

function updateDailyConsumptionBarChart(data) {
    const ctx = document.getElementById('dailyConsumptionChart').getContext('2d');
    const chart = new Chart(ctx, {
        type: 'bar',
        data: data,
        options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
                x: {
                    title: {
                        display: true,
                        text: 'Day of the Week'
                    }
                },
                y: {
                    title: {
                        display: true,
                        text: 'Consumption (kWh)'
                    }
                }
            }
        }
    });
}

function updateWeekdaysPieChart(data) {
    const ctx = document.getElementById('weekdaysPieChart').getContext('2d');
    const chart = new Chart(ctx, {
        type: 'pie',
        data: data,
        options: {
            responsive: true,
            maintainAspectRatio: false,
        }
    });
}

function updateWeekendPieChart(data) {
    const ctx = document.getElementById('weekendPieChart').getContext('2d');
    const chart = new Chart(ctx, {
        type: 'pie',
        data: data,
        options: {
            responsive: true,
            maintainAspectRatio: false,
        }
    });
}

function updateMonthComparisonBarChart(data) {
    const ctx = document.getElementById('monthComparisonBarChart').getContext('2d');
    const chart = new Chart(ctx, {
        type: 'bar',
        data: data,
        options: {
            responsive: true,
            maintainAspectRatio: false,
        }
    });
}

function updateActivePowerHistoryChart(data) {
    const ctx = document.getElementById('activePowerHistoryChart').getContext('2d');
    const chart = new Chart(ctx, {
        type: 'line',
        data: data,
        options: {
            responsive: true,
            maintainAspectRatio: false,
        }
    });
}


    </script>
</body>
</html>
